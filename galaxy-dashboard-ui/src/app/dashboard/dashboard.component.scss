.dashboard-container {
  font-family: var(--font-sans);
  background: var(--color-background);
  min-height: 100vh;
  overflow-x: hidden;
  width: 100%;
  position: relative;
  
  // Subtle background pattern with theme colors
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(circle at 20% 80%, rgba(52, 152, 219, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(93, 173, 226, 0.06) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }
}

.dashboard-content {
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  width: 100%;
  padding-top: 0%;
  position: relative;
  z-index: 1;
}

// Greetings Container - Light & Elegant Theme Header
.greetings-container {
  background: var(--gradient-purple);
  border-radius: var(--radius-3xl);
  box-shadow: var(--shadow-purple);
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transition: var(--transition-normal);
  position: relative;
  overflow: hidden;
  
  // Shimmer effect on hover
  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-purple), var(--shadow-medium);
    border-color: rgba(255, 255, 255, 0.3);
  }
  
  // Animated background overlay
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
    transition: left var(--transition-slow);
  }
  
  &:hover::before {
    left: 100%;
  }
  
  h1 {
    font-weight: 800;
    letter-spacing: -0.025em;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 1;
    color: var(--color-text-inverse);
  }
  
  p {
    font-weight: 500;
    opacity: 0.95;
    position: relative;
    z-index: 1;
    color: var(--color-text-inverse);
  }
}

.dashboard-grid-container {
  width: 100%;
  position: relative;
  min-height: 600px;
  z-index: 1;
}

.dashboard-grid {
  background: transparent !important;
  width: 100% !important;
  min-height: 600px !important;
}

// Widget Container - Light & Elegant Theme Cards
.widget-container {
  background: var(--color-surface);
  // border-radius: var(--radius-3xl);
  box-shadow: var(--shadow-soft);
  transition: var(--transition-normal);
  overflow: hidden;
  height: 100%;
  position: relative;
  border: 1px solid var(--color-border-light);
  
  // Hover effects
  &:hover {
    // transform: translateY(-4px);
    box-shadow: var(--shadow-medium);
    // border-color: var(--color-border-purple);
  }
  
  // Active/focus states
  &:focus-within {
    box-shadow: 0 0 0 3px var(--shadow-color-purple), var(--shadow-medium);
  }
  
  // Loading state
  &.loading {
    position: relative;
    overflow: hidden;
    
    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.1), transparent);
      animation: shimmer 1.5s infinite;
    }
  }
}

// Enhanced Gridster custom styling with theme colors
::ng-deep {
  .gridster-item {
    border-radius: var(--radius-3xl);
    overflow: hidden;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--color-surface);
    border: 1px solid var(--color-border-light);
    
    // Drag handle styling
    .drag-handle {
      cursor: grab;
      user-select: none;
      position: relative;
      
      &:active,
      &.dragging {
        cursor: grabbing !important;
      }
      
      // Add a subtle drag indicator
      &::before {
        content: '';
        position: absolute;
        top: 8px;
        right: 8px;
        width: 20px;
        height: 20px;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="12" r="1"/><circle cx="9" cy="5" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="19" r="1"/></svg>') no-repeat center;
        background-size: 16px 16px;
        opacity: 0;
        transition: opacity 0.2s ease;
        color: var(--color-text-secondary);
      }
      
      &:hover::before {
        opacity: 0.6;
      }
    }
    
    // Enhanced hover effect for gridster items with elevation
    &:hover {
      transform: translateY(-4px) scale(1.01);
      z-index: 10;
      border-color: var(--color-border-purple);
      box-shadow: 0 20px 40px rgba(99, 102, 241, 0.15), 
                  0 8px 24px rgba(52, 152, 219, 0.1),
                  0 0 0 1px rgba(99, 102, 241, 0.1);
      
      .widget-container {
        transform: none; // Prevent double transformation
      }
      
      .drag-handle {
        cursor: grab;
        
        &::before {
          opacity: 0.8;
        }
      }
    }
    
    // Smooth transition back
    &:not(:hover) {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    // Active dragging state
    &.gridster-item-moving {
      z-index: 1000;
      box-shadow: 0 25px 50px rgba(99, 102, 241, 0.25), 
                  0 12px 30px rgba(52, 152, 219, 0.15);
      border-color: var(--color-purple-500);
      transform: rotate(2deg) scale(1.05);
      cursor: grabbing !important;
      
      .drag-handle {
        cursor: grabbing !important;
        
        &::before {
          opacity: 1;
        }
      }
      
      // Add a subtle pulsing effect while dragging
      animation: dragPulse 1s ease-in-out infinite alternate;
        }
  }
  
  // When dialog is open, force all gridster elements to low z-index without affecting positioning
  body.cdk-global-overlay-wrapper &,
  body.dialog-open & {
    .gridster-item {
      z-index: 1 !important;
      
      &:hover {
        z-index: 5 !important;
      }
      
      &.gridster-item-moving {
        z-index: 50 !important;
      }
    }
  }
      
      // Resize handles
      .gridster-item-resizable-handler {
        // background: var(--color-purple-500);
        // border-radius: var(--radius-sm);
        transition: var(--transition-fast);
        opacity: 0;
        
        &:hover {
          // background: var(--color-purple-600);
          transform: scale(1.1);
          opacity: 1;
        }
      }
      
      // Show resize handles on hover
      &:hover .gridster-item-resizable-handler {
        opacity: 0.7;
      }
  }
  
  // Animation for dragging
  @keyframes dragPulse {
    from {
      box-shadow: 0 25px 50px rgba(99, 102, 241, 0.25), 
                  0 12px 30px rgba(52, 152, 219, 0.15);
    }
    to {
      box-shadow: 0 30px 60px rgba(99, 102, 241, 0.35), 
                  0 15px 35px rgba(52, 152, 219, 0.2);
    }
  }
  
  // Gridster grid lines with theme colors
  .gridster-column,
  .gridster-row {
    background: rgba(52, 152, 219, 0.08);
    border: none;
    border-radius: var(--radius-lg);
  }
  
  // Enhanced scroll behavior during drag
  .dashboard-content.drag-scroll-active {
    scroll-behavior: smooth;
    
    // Show scroll indicator during drag
    &::after {
      content: '';
      position: fixed;
      top: 50%;
      right: 20px;
      width: 6px;
      height: 40px;
      background: linear-gradient(to bottom, var(--color-purple-500), var(--color-purple-400));
      border-radius: 3px;
      opacity: 0.7;
      animation: scrollIndicator 1s ease-in-out infinite alternate;
      z-index: 1001;
    }
  }
  
  @keyframes scrollIndicator {
    from {
      opacity: 0.7;
      transform: translateX(0);
    }
    to {
      opacity: 1;
      transform: translateX(-3px);
    }
  }


// Responsive design with adjusted hover effects
@media (max-width: 1024px) {
  .dashboard-container {
    .p-4, .p-6 {
      padding: var(--spacing-md);
    }
  }
  
  .dashboard-grid-container {
    margin: 0 calc(-1 * var(--spacing-sm));
  }
  
  .greetings-container {
    border-radius: var(--radius-2xl);
    margin-bottom: var(--spacing-lg);
    
    h1 {
      font-size: 1.75rem;
    }
    
    p {
      font-size: 0.95rem;
    }
  }
  
  .widget-container {
    border-radius: var(--radius-2xl);
  }
  
  // Reduce hover effects on tablets
  ::ng-deep .gridster-item {
    &:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: 0 12px 25px rgba(99, 102, 241, 0.12), 
                  0 6px 16px rgba(52, 152, 219, 0.08);
    }
  }
}

@media (max-width: 768px) {
  .dashboard-container {
    .p-4, .p-6 {
      padding: var(--spacing-sm);
    }
  }
  
  .greetings-container {
    border-radius: var(--radius-xl);
    padding: var(--spacing-lg);
    
    h1 {
      font-size: 1.5rem;
    }
    
    p {
      font-size: 0.9rem;
    }
  }
  
  .widget-container {
    border-radius: var(--radius-lg);
  }
  
  // Minimal hover effects on mobile
  ::ng-deep .gridster-item {
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(99, 102, 241, 0.1), 
                  0 4px 8px rgba(52, 152, 219, 0.05);
    }
  }
}

// Animation keyframes
@keyframes shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

// Smooth transitions for all interactive elements
* {
  transition: var(--transition-normal);
}

// Enhanced focus states for accessibility
*:focus-visible {
  outline: 2px solid var(--color-purple-500);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

// Reduced motion support for accessibility
@media (prefers-reduced-motion: reduce) {
  ::ng-deep .gridster-item {
    transition: box-shadow 0.2s ease, border-color 0.2s ease !important;
    
    &:hover {
      transform: none !important;
      box-shadow: 0 4px 8px rgba(99, 102, 241, 0.1) !important;
    }
  }
  
  .chart-widget {
    transition: box-shadow 0.2s ease !important;
    
    &:hover {
      transform: none !important;
    }
  }
}

// Loading skeleton animation with theme colors
.skeleton {
  background: linear-gradient(90deg, var(--color-gray-200) 25%, var(--color-gray-300) 50%, var(--color-gray-200) 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .dashboard-container,
  .widget-container,
  .greetings-container,
  * {
    transition: none !important;
    animation: none !important;
    transform: none !important;
  }
}

// Theme-specific utility classes for dashboard
.dashboard-theme-purple {
  background: var(--color-purple-600);
  color: var(--color-text-inverse);
}

.dashboard-theme-surface {
  background: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}

.dashboard-theme-background {
  background: var(--color-background);
  color: var(--color-text-primary);
}

.dashboard-theme-card {
  background: var(--gradient-card);
  color: var(--color-text-primary);
  border: 1px solid var(--color-purple-200);
}