<div class="data-table group h-full p-6 bg-gradient-to-br from-white via-gray-50/30 to-white rounded-2xl shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-500 ease-out">
  
  <!-- Widget Header -->
  <app-widget-header
    [title]="data.title"
    [isLoading]="isRefreshing"
    [dashboardWidgetId]="data.dashboardWidgetId"
    [widgetData]="getExpandedData()"
    (onRefresh)="handleRefresh()"
    (onExpand)="handleExpand($event)"
    (onClose)="handleClose($event)">
  </app-widget-header>

  <!-- Loading Skeleton -->
  <app-widget-loading-skeleton 
    *ngIf="isRefreshing"
    skeletonType="table"
    [title]="'Refreshing table data...'">
  </app-widget-loading-skeleton>

  <!-- Table Content -->
  <div *ngIf="!isRefreshing">
    <!-- Search and Filters -->
  <div class="flex flex-col sm:flex-row gap-4 mb-6">
    <div class="relative flex-1">
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <i class="fas fa-search text-gray-400"></i>
      </div>
      <input 
        type="text" 
        [(ngModel)]="searchTerm"
        (input)="filterTransactions()"
        placeholder="Search transactions..."
        class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl bg-white/80 backdrop-blur-sm text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-300 transition-all duration-200 shadow-sm hover:shadow-md"
      >
    </div>
    <div class="flex items-center space-x-2">
      <select 
        [(ngModel)]="itemsPerPage"
        (change)="changeItemsPerPage(itemsPerPage)"
        class="px-4 py-3 border border-gray-200 rounded-xl bg-white/80 backdrop-blur-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-300 transition-all duration-200 shadow-sm hover:shadow-md"
        style="padding-right: 5px; width: 150px; margin-right: 5px;"
        >
        <option [value]="10">10 per page</option>
        <option [value]="20">20 per page</option>
        <option [value]="50">50 per page</option>
      </select>
    </div>
  </div>

    <!-- Modern Table -->
    <div class="overflow-hidden rounded-xl border border-gray-200/50 shadow-sm bg-white/80 backdrop-blur-sm">
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gradient-to-r from-gray-50 to-gray-100/80">
            <tr class="border-b border-gray-200/50">
              <th class="text-left py-4 px-6 font-semibold text-gray-700 cursor-pointer hover:bg-white/50 transition-all duration-200"
                  (click)="sort('date')">
                <div class="flex items-center space-x-2">
                  <span>Date</span>
                  <i [class]="getSortIcon('date') + ' text-gray-500 text-xs'"></i>
                </div>
              </th>
              <th class="text-left py-4 px-6 font-semibold text-gray-700 cursor-pointer hover:bg-white/50 transition-all duration-200"
                  (click)="sort('paymentId')">
                <div class="flex items-center space-x-2">
                  <span>Payment ID</span>
                  <i [class]="getSortIcon('paymentId') + ' text-gray-500 text-xs'"></i>
                </div>
              </th>
              <th class="text-left py-4 px-6 font-semibold text-gray-700 cursor-pointer hover:bg-white/50 transition-all duration-200"
                  (click)="sort('amount')">
                <div class="flex items-center space-x-2">
                  <span>Amount</span>
                  <i [class]="getSortIcon('amount') + ' text-gray-500 text-xs'"></i>
                </div>
              </th>
              <th class="text-left py-4 px-6 font-semibold text-gray-700">Status</th>
              <th class="text-left py-4 px-6 font-semibold text-gray-700 cursor-pointer hover:bg-white/50 transition-all duration-200"
                  (click)="sort('paymentRail')">
                <div class="flex items-center space-x-2">
                  <span>Payment Rail</span>
                  <i [class]="getSortIcon('paymentRail') + ' text-gray-500 text-xs'"></i>
                </div>
              </th>
              <th class="text-left py-4 px-6 font-semibold text-gray-700">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of paginatedTransactions; let i = index" 
                class="border-b border-gray-100/50 hover:bg-blue-50/30 transition-all duration-200 group"
                [ngClass]="{ 
                    'bg-white': i % 2 === 0, 
                    'bg-gray-50/30': i % 2 === 1 
                }">
              <td class="py-4 px-6 text-sm text-gray-700 font-medium">
                {{ transaction.date | date:'MMM dd, yyyy HH:mm' }}
              </td>
              <td class="py-4 px-6 text-sm font-semibold text-gray-900">
                <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded-lg text-xs font-mono">
                  {{ transaction.paymentId }}
                </span>
              </td>
              <td class="py-4 px-6 text-sm font-bold text-gray-900">
                {{ transaction.amount }}
              </td>
              <td class="py-4 px-6">
                <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm"
                      [class]="getStatusColor(transaction.status)">
                  <i [class]="getStatusIcon(transaction.status) + ' mr-1.5'"></i>
                  {{ transaction.status }}
                </span>
              </td>
              <td class="py-4 px-6">
                <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold shadow-sm"
                      [class]="getRailColor(transaction.paymentRail)">
                  {{ transaction.paymentRail }}
                </span>
              </td>
              <td class="py-4 px-6">
                <div class="flex items-center space-x-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                  <button class="p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200" title="View Details">
                    <i class="fas fa-eye text-sm"></i>
                  </button>
                  <button class="p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200" title="Edit">
                    <i class="fas fa-edit text-sm"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modern Pagination -->
    <div class="flex items-center justify-between mt-6 p-4 bg-gray-50/50 rounded-xl border border-gray-200/50">
      <div class="text-sm font-medium text-gray-600">
        Showing {{ (currentPage - 1) * itemsPerPage + 1 }} to {{ Math.min(currentPage * itemsPerPage, filteredTransactions.length) }} of {{ filteredTransactions.length }} results
      </div>
      <div class="flex items-center space-x-2">
        <button 
          (click)="changePage(currentPage - 1)"
          [disabled]="currentPage === 1"
          class="px-4 py-2 text-sm font-medium border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm">
          <i class="fas fa-chevron-left mr-2"></i>Previous
        </button>
        <div class="flex items-center space-x-1">
          <button 
            *ngFor="let page of [].constructor(totalPages); let i = index"
            (click)="changePage(i + 1)"
            [class]="(i + 1 === currentPage ? 'bg-blue-600 text-white shadow-md' : 'text-gray-700 bg-white hover:bg-gray-50') + ' px-3 py-2 text-sm font-medium border border-gray-300 rounded-lg transition-all duration-200 shadow-sm'">
            {{ i + 1 }}
          </button>
        </div>
        <button 
          (click)="changePage(currentPage + 1)"
          [disabled]="currentPage === totalPages"
          class="px-4 py-2 text-sm font-medium border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm">
          Next<i class="fas fa-chevron-right ml-2"></i>
        </button>
      </div>
    </div>
  </div>
</div> 